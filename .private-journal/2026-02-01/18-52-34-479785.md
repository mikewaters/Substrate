---
title: "6:52:34 PM - February 1, 2026"
date: 2026-02-01T23:52:34.479Z
timestamp: 1769989954479
---

## Project Notes

## Obsidian Frontmatter Parser (Issue #12) - Codebase Analysis

### Current Data Flow
1. `ObsidianMarkdownReader.load_data()` - parses YAML frontmatter, puts raw dict in `node.metadata["frontmatter"]`
2. `ObsidianVaultReader.load_data()` - adds file metadata (note_name, relative_path, folder_name, etc.), extracts wikilinks/backlinks
3. Pipeline: `TextNormalizerTransform -> ObsidianEnrichmentTransform (sometimes) -> PersistenceTransform -> MarkdownNodeParser -> ChunkPersistenceTransform -> SizeAwareChunkSplitter -> embed_model`

### Key Observations
- The `ingest()` method pipeline does NOT include `ObsidianEnrichmentTransform` currently! It goes directly TextNormalizerTransform -> PersistenceTransform
- The `ingest_test()` method pipeline (experimental) also doesn't include it - uses Bronze transforms instead
- `ObsidianEnrichmentTransform` exists but is NOT wired into any active pipeline
- The existing `OntologyMapper` in `catalog.transform.ontology` is skeletal - just has NOTE_TYPE_MAP and TOPIC_MAP hardcoded
- The `ObsidianMetadataMapper` in `catalog.ontology.mapper` is essentially a no-op (returns metadata as-is)
- `PersistenceTransform._get_metadata_json()` filters out `_`-prefixed keys and `file_path`
- `PersistenceTransform._process_node()` reads `title` and `description` from node.metadata

### Design Constraints
- Pre-alpha: no migrations, no backward compat
- Python dataclasses for internal, Pydantic for I/O
- `agentlayer.logging` for logging
- No stubs/TODOs
- LlamaIndex Document supports `excluded_llm_metadata_keys`, `excluded_embed_metadata_keys`, custom `metadata_separator`, `metadata_template`, `text_template`

### Files to Replace/Modify
- `catalog/ontology/__init__.py` - currently a stub
- `catalog/ontology/mapper.py` - currently a no-op
- `catalog/transform/ontology.py` - skeletal hardcoded maps
- `catalog/transform/obsidian.py` - ObsidianEnrichmentTransform does title/desc derivation
- `catalog/ingest/schemas.py` - IngestObsidianConfig needs vault_schema
- `catalog/ingest/obsidian.py` - ObsidianMarkdownReader/ObsidianVaultReader need to handle VaultSchema
- `catalog/ingest/pipelines.py` - pipeline wiring
- `catalog/ingest/sources.py` - create_source/create_reader need config propagation

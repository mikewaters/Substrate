{"id": "doc_classifications_with_topics", "description": "Show document classifications joined with topic assignments, topics, and taxonomies", "sql": "SELECT dc.document_id, dc.document_type, dc.confidence AS classification_confidence, dc.reasoning AS classification_reasoning, dc.model_name, dc.model_version, dc.prompt_version, t_class.id AS classified_taxonomy_id, t_class.title AS classified_taxonomy_name, dta.topic_id, dta.confidence AS topic_confidence, dta.rank AS topic_rank, dta.reasoning AS topic_reasoning, topic.title AS topic_name, topic.description AS topic_description, t_topic.id AS topic_taxonomy_id, t_topic.title AS topic_taxonomy_name FROM document_classification dc INNER JOIN taxonomy t_class ON dc.taxonomy_id = t_class.id LEFT JOIN document_topic_assignment dta ON dc.id = dta.classification_id LEFT JOIN topic ON dta.topic_id = topic.id LEFT JOIN taxonomy t_topic ON topic.taxonomy_id = t_topic.id ORDER BY dc.document_id, dta.rank", "tags": ["documents", "topics", "classification", "taxonomy"]}
{"id": "resources_with_relationships", "description": "List all resources with their catalog, repository, related resources, and related topics", "sql": "SELECT r.id AS resource_id, r.title AS resource_title, r.resource_type, r.document_type, c.id AS catalog_id, c.title AS catalog_title, rep.id AS repository_id, rep.title AS repository_title, GROUP_CONCAT(DISTINCT rr.id) AS related_resource_ids, GROUP_CONCAT(DISTINCT rr.title) AS related_resource_titles, GROUP_CONCAT(DISTINCT t.id) AS related_topic_ids, GROUP_CONCAT(DISTINCT t.title) AS related_topic_titles FROM resource r LEFT JOIN catalog c ON r.catalog_id = c.id LEFT JOIN repository rep ON r.repository_id = rep.id LEFT JOIN resource_related_resources rrr ON r.id = rrr.source_resource_id LEFT JOIN resource rr ON rrr.related_resource_id = rr.id LEFT JOIN resource_related_topics rrt ON r.id = rrt.resource_id LEFT JOIN topic t ON rrt.topic_id = t.id GROUP BY r.id, r.title, r.resource_type, r.document_type, c.id, c.title, rep.id, rep.title ORDER BY r.id", "tags": ["resources", "catalog", "repository", "topics", "relationships"]}

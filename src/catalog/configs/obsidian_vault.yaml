# Sample ingestion job config — exercises all supported options.
#
# Usage:
#   from catalog.ingest.pipelines import IngestPipeline
#   pipeline = IngestPipeline()
#   result = pipeline.ingest_from_config(Path("configs/sample_vault.yaml"))
#
# Hydra variable interpolation is supported:
#   ${source.type}  resolves to "obsidian"
#   ${embedding.model_name} resolves to the model name string

source:
  type: obsidian                          # Literal["obsidian"] — only supported source type
  source_path: /Users/mike/Develop/lifeos/substrate/src/catalog/catalog/tests/corpus/vault
  dataset_name: vault      # auto-derived from folder name if omitted
  ontology_spec: catalog.integrations.obsidian.ontology_spec.VaultSchema  # dotted import path, or omit for no schema
  force: false                             # reprocess all documents even if unchanged

# embedding: (optional — omit to use application-level IDX_EMBEDDING_* settings)
embedding:
  backend: mlx                            # "mlx" | "huggingface"
  model_name: mlx-community/all-MiniLM-L6-v2-bf16
  batch_size: 32

pipeline:
  cache_enabled: true                     # false disables docstore/vector_store entirely
  docstore_strategy: upserts              # "upserts" | "duplicates_only" | "upserts_and_delete"
